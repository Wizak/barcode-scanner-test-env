<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>BLE GATT –Ü–Ω—Å–ø–µ–∫—Ç–æ—Ä</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    pre { background: #f5f5f5; padding: 1em; }
  </style>
</head>
<body>
  <h1>üîç –Ü–Ω—Å–ø–µ–∫—Ç–æ—Ä BLE –°–∫–∞–Ω–µ—Ä–∞</h1>
  <button id="connectBtn">üîó –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é</button>
  <pre id="output">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è...</pre>

  <script>
    document.getElementById('connectBtn').addEventListener('click', async () => {
      const out = document.getElementById('output');
      out.textContent = 'üîÑ –ü–æ—à—É–∫ –ø—Ä–∏—Å—Ç—Ä–æ—é...';

      try {
        const device = await navigator.bluetooth.requestDevice({
          acceptAllDevices: true,
          optionalServices: ['generic_access', 'generic_attribute']
        });

        const server = await device.gatt.connect();
        const services = await server.getPrimaryServices();

        let log = `‚úÖ –ü—Ä–∏—Å—Ç—Ä—ñ–π: ${device.name || 'Unnamed'}\n\n`;

        for (const service of services) {
          log += `üîπ Service UUID: ${service.uuid}\n`;

          const characteristics = await service.getCharacteristics();

          for (const char of characteristics) {
            log += `    üü° Characteristic UUID: ${char.uuid}\n`;
            log += `       Properties: ${Object.keys(char.properties).filter(p => char.properties[p]).join(', ')}\n`;
          }

          log += `\n`;
        }

        out.textContent = log;
      } catch (err) {
        out.textContent = `‚ùå –ü–æ–º–∏–ª–∫–∞: ${err.message}`;
      }
    });
  </script>
</body>
</html>
